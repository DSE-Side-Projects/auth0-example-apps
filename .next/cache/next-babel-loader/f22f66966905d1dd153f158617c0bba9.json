{"ast":null,"code":"import auth0 from '../../utils/auth0';\nexport default async function me(req, res) {\n  try {\n    Profile.getInitialProps = async ({\n      req,\n      res\n    }) => {\n      if (true) {\n        const session = await auth0.getSession(req);\n\n        if (!session || !session.user) {\n          res.writeHead(302, {\n            Location: '/api/login'\n          });\n          res.end();\n          return;\n        }\n\n        return {\n          user: session.user\n        };\n      }\n    };\n  } catch (error) {\n    console.error(error);\n    res.status(error.status || 500).end(error.message);\n  }\n}","map":{"version":3,"sources":["/Users/rosnovsky/Projects/auth0-example-apps/pages/api/me.ts"],"names":["auth0","me","req","res","Profile","getInitialProps","session","getSession","user","writeHead","Location","end","error","console","status","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,mBAAlB;AAEA,eAAe,eAAeC,EAAf,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4B;AACzC,MAAI;AACFC,IAAAA,OAAO,CAACC,eAAR,GAA0B,OAAO;AAAEH,MAAAA,GAAF;AAAOC,MAAAA;AAAP,KAAP,KAAwB;AAC9C,gBAAmC;AACjC,cAAMG,OAAO,GAAG,MAAMN,KAAK,CAACO,UAAN,CAAiBL,GAAjB,CAAtB;;AACA,YAAI,CAACI,OAAD,IAAY,CAACA,OAAO,CAACE,IAAzB,EAA+B;AAC7BL,UAAAA,GAAG,CAACM,SAAJ,CAAc,GAAd,EAAmB;AACjBC,YAAAA,QAAQ,EAAE;AADO,WAAnB;AAGAP,UAAAA,GAAG,CAACQ,GAAJ;AACA;AACD;;AACD,eAAO;AAAEH,UAAAA,IAAI,EAAEF,OAAO,CAACE;AAAhB,SAAP;AACD;AACF,KAZH;AAaD,GAdD,CAcE,OAAOI,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAT,IAAAA,GAAG,CAACW,MAAJ,CAAWF,KAAK,CAACE,MAAN,IAAgB,GAA3B,EAAgCH,GAAhC,CAAoCC,KAAK,CAACG,OAA1C;AACD;AACF","sourcesContent":["import auth0 from '../../utils/auth0';\n\nexport default async function me(req, res) {\n  try {\n    Profile.getInitialProps = async ({ req, res }) => {\n        if (typeof window === 'undefined') {\n          const session = await auth0.getSession(req);\n          if (!session || !session.user) {\n            res.writeHead(302, {\n              Location: '/api/login'\n            });\n            res.end();\n            return;\n          }\n          return { user: session.user };\n        }\n      };\n  } catch (error) {\n    console.error(error);\n    res.status(error.status || 500).end(error.message);\n  }\n}"]},"metadata":{},"sourceType":"module"}